**第一次技术面（60min）**

1. 说一说你使用的是什么样的线程池，自定义线程池的几个参数是什么

   * ThreadPoolExecutor
     * CorePoolSize
     * MaxPoolSize
     * TTL(KeepAliveTimes)
     * BlockingQueue
     * subclass: Scheduled

2. 说一说线程池的执行流程

   * Use core pool if current active thread < core
   * use blocking queue

3. 你的项目中定义的核心线程数、最大线程数和队列大小是如何定义的？为什么这样定义？（这道题根绝我导师给我说是一个加分项）

4. 在项目中如何防止超卖现象

5. 你的下订单的sql语句如何编写的？（考察MySQL的乐观锁）

6. 如果有用户反馈说整个系统的反馈比较慢，你是如何排查和如何解决问题的？

7. 影响系统响应慢的原因有哪些？ (单系统还是micro-services)

   *Find the bottlenecks*

   * 网络
     * 网络本身
     * 本身请求资源过大
   * 系统资源耗尽 (CPU, 内存， file descriptor， 为关闭I/O)
     * 高并发
     * 系统密集
   * downstream 系统慢
     * 数据库
     * services
   * 代码、系统本身异常、宕机、死锁等等

8. 算法题：给定一个无序数组和一个目标值，找出数组中两个数之和等于目标值的所有组合，并指出其时间复杂度。（很简单的一个算法题，leetcode easy难度）

9. 了解过JVM内存模型么？说说哪些是线程独享、哪些是线程共享的？

   * 独享：栈 - 程序计数器，方法变量，
   * 共享：堆， 方法区， 常量池。。

10. 详细说一下Java堆的分区，他们的比例，以及如果把比例调大以后会有什么样的后果？

    1. Young Gen
       * 1个Eden区和2个Survivor区（分别叫from和to）。默认比例为eden:from:to = 8：1：1
         因为Eden区中的对象都是朝生夕死的，一次minor GC会回收掉超过90%的对象，进入Survivor区的对象已经很少了。
         且比较高效，98%以上的对象是一次就会被minor gc时回收的。然GC时9层丢掉，剩下的放在S1，所以给了1层.然后结束后S1肯定要放回给S0区，也就是对调。这也是为什么会多S0出来。这样比例就是8:1:1了

11. 说一下JVM的GC算法，以及为什么“标记-整理”法更好一些，他能解决什么样的问题？

12. 了解过Java类加载机制么？一共有哪几种类加载器？

13. 如果你想查看线上正在运行的服务的GC日志，你需要输入什么指令?

14. 了解过HashMap么，说一下HashMap的原理。

15. 如果两个对象hashCode相同，则一定是相同对象么，如果是两个相等的对象，那么他们的hashCode相同么？

    1. hash相同不一定相同对象
    2. 相等对象 hash一定相同

16. 如何解决hash冲突？

17. HashMap是线程安全的么，如何把HashMap变成线程安全的类？

18. 说一说MySQL数据库有哪些数据库引擎？

    * InnoDB存储引擎（推荐）
      * InnoDB是事务型数据库的首选引擎，支持事务安全表（ACID），支持行锁定和外键，上图也看到了，InnoDB是默认的MySQL引擎。
    * MyISAM存储引擎
      * MyISAM基于ISAM存储引擎，并对其进行扩展。它是在Web、数据仓储和其他应用环境下最常使用的存储引擎之一。MyISAM拥有较高的插入、查询速度，但不支持事物。
    * MEMORY存储引擎：将表中的数据存储到内存中，未查询和引用其他表数据提供快速访问。

19. InnoDB的索引的数据结构是什么，说一说他的原理

    * b/b+ tree

20. 数据库事务等级以及他们解决了什么问题，请举例说明一下

21. MySQL默认的事务等级是什么？

22. MySQL如何开启慢查询？

23. 说一下Spring主要包含哪些模块？

    1. ![img](https://pic2.zhimg.com/80/v2-178b9c0afe90996fb8e527840c8c1869_1440w.jpg)
    2. * Beans模块：提供了BeanFactory，是工厂模式的经典实现，Spring将管理对象称为Bean。
       * Core核心模块：提供了Spring框架的基本组成部分，包括IoC和DI功能。
       * Context上下文模块：建立在Core和Beans模块的基础之上，它是访问定义和配置的任何对象的媒介。其中ApplicationContext接口是上下文模块的焦点。

24. 说一下你对Spring的IOC容器的理解以及启动流程

25. 有了解过RPC框架或分布式的东西么？（这个后来问面试官，就是考察对新技术的了解以及对互联网发展的一个关注度）

26. 说一下你读过的有关Java的书籍

**第二次技术面（30min）**

1. 介绍一下你做的项目中你觉得最好的那个；说一下你这个项目中的技术难点和挑战。
2. 如何解决商城项目中出现的超卖、少卖问题？
3. 说一下什么是幂等性
4. Redis如何保证 **高可用**的
5. Redis的哨兵模式知道吗？
6. 你用Redis觉得有什么缺点吗？
7. 你是如何做压力测试的？压力测试的数据是什么？
8. 线城池有哪些参数？
9. 核心线程数和最大线程数有什么区别？
10. 常见的拒绝策略有哪些？
11. 介绍一下SpringBoot的特性
12. 说一下什么是单例模式
13. 什么是饿汉模式、懒汉模式
14. 使用懒汉模式的注意事项以及如何解决
15. 说一下volatile关键字的作用和原理
16. 说一下自旋锁和一些常见的自旋锁的实现
17. 说一下数据库的左外连接
18. 数据库索引优化
19. 数据库索引的数据结构

**第三次技术面（25min）**

1. 如何解决商城项目中出现的超卖、少卖问题？
2. 在开发项目中，遇到了哪些问题？
3. Redis与数据库同步时候出现问题是如何解决的
4. 说一下Java当中线程有哪些状态
5. 线程的阻塞和等待有什么区别
6. 介绍一些Java的锁机制
7. 你了解过哪些锁的类型
8. 为什么wait、notify这个方法会在Object这个类下面
9. 分布式、RPC框架有了解过吗
10. Redis的线程模型是什么（考察NIO）
11. Redis实现的消息队列是如何保证消息不丢
12. 介绍一下堆排序是如何实现的
13. 介绍一下TCP/IP协议是如何保证消息可靠传输的
14. TCP/IP协议做了什么优化（拥塞控制和流量控制）

**第四次技术面（15min）**

1. 说一下你投稿的文章写得是什么内容
2. 介绍一下消息队列
3. 超卖是如何解决的？
4. 下单过程是如何设计的？
5. 介绍一下雪花算法
6. 你怎么理解分布式？
7. 分布式之间怎么通信？
   1. Rest
   2. RPC
   3. 消息中间件Message queue(include rpc)
8. 生产者、消费者模型是怎么工作的？
9. Java里面创建线程的方式
10. 代码场景：给一个字符串，统计每个大写字母出现的次数，按照次数排序，从小到大输出字母和其出现的次数





# #算法

**口述算法：N个数，有一个数出现超过N/2，寻找这个数**

* https://leetcode.com/problems/majority-element (candidate + vote)

